<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Smart Career Hub - Your Gateway to Career Success. Find jobs, connect with recruiters, and advance your career.">
    <meta name="keywords" content="career, jobs, recruitment, job search, career development">
    <title th:text="${appName} + ' - ' + ${tagline}">Smart Career Hub - Your Gateway to Career Success</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Stylesheet -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="navbar-container">
            <a href="/" class="navbar-logo" th:text="${appName}">Smart Career Hub</a>
            <ul class="navbar-menu" id="navbarMenu">
                <li><a href="#home" class="navbar-link">Home</a></li>
                <li><a href="#about" class="navbar-link">About</a></li>
                <li><a href="#opportuities" class="navbar-link">Opportunities</a></li>

                <!-- Show when NOT logged in -->
                <li id="loginLink"><a th:href="@{/auth/login}" class="navbar-link">Login</a></li>
                <li id="registerLink"><a th:href="@{/auth/register-choice}" class="btn btn-primary"
                        style="padding: 0.5rem 1.5rem;">Get Started</a></li>
                <!-- Show when logged in -->
                <li class="user-profile-menu" id="profileMenu" style="display: none;">
                    <div class="profile-dropdown">
                        <button class="profile-button" onclick="toggleDropdown()">
                            <div class="profile-avatar-small" id="userAvatar">JD</div>
                            <span class="profile-name-nav" id="userName">John Doe</span>
                            <i class="bi bi-chevron-down"></i>
                        </button>
                        <div class="dropdown-menu" id="profileDropdown">
                            <a href="/chercheur/dashboard" class="dropdown-item">
                                <i class="bi bi-speedometer2"></i>
                                Dashboard
                            </a>
                            <a href="/chercheur/profile" class="dropdown-item">
                                <i class="bi bi-person"></i>
                                My Profile
                            </a>
                            <a href="/chercheur/applications" class="dropdown-item">
                                <i class="bi bi-file-earmark-text"></i>
                                My Applications
                            </a>
                            <a href="/chercheur/saved-jobs" class="dropdown-item">
                                <i class="bi bi-bookmark"></i>
                                Saved Jobs
                            </a>
                            <a href="/chercheur/settings" class="dropdown-item">
                                <i class="bi bi-gear"></i>
                                Settings
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" onclick="logout()" class="dropdown-item logout">
                                <i class="bi bi-box-arrow-right"></i>
                                Logout
                            </a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">
                    Transform Your Career with <span class="hero-title-gradient" th:text="${appName}">Smart Career
                        Hub</span>
                </h1>
                <p class="hero-subtitle" th:text="${tagline}">
                    Your Gateway to Career Success
                </p>
                <p class="hero-subtitle">
                    Connect with top employers, discover opportunities, and take control of your professional journey.
                    Whether you're a job seeker or a recruiter, we've got you covered.
                </p>
                <div class="hero-buttons">
                    <a th:href="@{/auth/register-choice}" class="btn btn-primary">
                        Get Started
                    </a>
                    <a th:href="@{/auth/login}" class="btn btn-secondary">
                        Sign In
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="features-container">
            <div class="section-header">
                <h2 class="section-title">Why Choose <span class="text-gradient">Smart Career Hub</span>?</h2>
                <p class="section-subtitle">Everything you need to succeed in your career journey, all in one place</p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h3 class="feature-title">Smart Job Matching</h3>
                    <p class="feature-description">
                        Our intelligent algorithm matches you with opportunities that align with your skills,
                        experience, and career goals.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h3 class="feature-title">Career Coaching</h3>
                    <p class="feature-description">
                        Get personalized guidance from industry experts to accelerate your career growth and achieve
                        your professional objectives.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h3 class="feature-title">Professional Training</h3>
                    <p class="feature-description">
                        Access a wide range of courses and certifications to enhance your skills and stay competitive in
                        the job market.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h3 class="feature-title">Direct Connections</h3>
                    <p class="feature-description">
                        Connect directly with recruiters and hiring managers. Build meaningful professional
                        relationships.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h3 class="feature-title">Application Tracking</h3>
                    <p class="feature-description">
                        Keep track of all your applications in one place. Monitor your progress and never miss an
                        opportunity.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon"></div>
                    <h3 class="feature-title">Instant Notifications</h3>
                    <p class="feature-description">
                        Stay updated with real-time alerts for new job postings, application updates, and messages from
                        recruiters.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats" id="about">
        <div class="stats-container">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number">10K+</div>
                    <div class="stat-label">Active Users</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">5K+</div>
                    <div class="stat-label">Job Listings</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">500+</div>
                    <div class="stat-label">Companies</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">95%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="container">
            <div class="cta-container">
                <h2 class="cta-title">Ready to Take the Next Step?</h2>
                <p class="cta-description">
                    Join thousands of professionals who have already transformed their careers with Smart Career Hub.
                </p>
                <div class="hero-buttons" style="justify-content: center;">
                    <a th:href="@{/auth/register-choice}" class="btn btn-primary">
                        Create Account
                    </a>
                    <a th:href="@{/auth/login}" class="btn btn-secondary">
                        Sign In
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-logo" th:text="${appName}">Smart Career Hub</div>
            <p class="footer-text">
                Â© 2025 Smart Career Hub. All rights reserved. Empowering careers worldwide.
            </p>
        </div>
    </footer>

    <!-- JavaScript for Navbar Scroll Effect and User State -->
    <script>
        // Navbar scroll effect
        window.addEventListener('scroll', function () {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Check if user is logged in
        function checkLoginStatus() {
            const token = localStorage.getItem('token');
            const userRole = localStorage.getItem('userRole');

            if (token && userRole) {
                // User is logged in - show profile menu, hide login/register
                document.getElementById('loginLink').style.display = 'none';
                document.getElementById('registerLink').style.display = 'none';
                document.getElementById('profileMenu').style.display = 'block';

                // You can fetch user data from API here and update the profile
                // For now, using stored data or defaults
                const userName = localStorage.getItem('userName') || 'User';
                const userInitials = userName.split(' ').map(n => n[0]).join('').toUpperCase() || 'U';

                document.getElementById('userName').textContent = userName;
                document.getElementById('userAvatar').textContent = userInitials;
            } else {
                // User is not logged in - show login/register, hide profile
                document.getElementById('loginLink').style.display = 'block';
                document.getElementById('registerLink').style.display = 'block';
                document.getElementById('profileMenu').style.display = 'none';
            }
        }

        // Toggle dropdown
        function toggleDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('show');
        }

        // Close dropdown when clicking outside
        window.onclick = function (event) {
            if (!event.target.matches('.profile-button') && !event.target.closest('.profile-button')) {
                const dropdown = document.getElementById('profileDropdown');
                if (dropdown && dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                }
            }
        }

        // Logout function
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('userRole');
            localStorage.removeItem('userName');
            window.location.href = '/auth/login';
        }

        // Check login status on page load
        document.addEventListener('DOMContentLoaded', checkLoginStatus);
    </script>
</body>

</html>